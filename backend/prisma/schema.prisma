datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id           Int           @id @default(autoincrement())
  providerId   String        @unique
  email        String        @unique
  nickName     String?       @unique
  firstName    String?
  lastName     String?
  provider     String?
  avatar       String?
  firstTime    Boolean       @default(false)
  secretOpt    String?
  otpIsEnabled Boolean       @default(false)
  level        Int           @default(10)
  cover        String?
  sockets      String[]
  achievements Achievement[]
  friends      User[]        @relation("friends")
  friendOf     User[]        @relation("friends")
  games        Game[]
}

model Achievement {
  id     Int     @id @default(autoincrement())
  name   String
  locked Boolean @default(false)
  userId Int
  user   User    @relation(fields: [userId], references: [id])
}

enum GameStatus {
  WIN
  LOSE
}

model Game {
  id            Int        @id @default(autoincrement())
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt
  opponentId    Int
  userId        Int
  userScore     Int
  opponentScore Int
  status        GameStatus
  user          User       @relation(fields: [userId], references: [id])
}
